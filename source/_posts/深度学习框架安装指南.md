---
title: 深度学习框架安装指南
date: 2021-10-11 21:17:27
categories: 使用指南
tags: linux
---

## 前言

tensorflow和pytorch这些深度学习框架的安装需要与一定版本的cuda、cudnn、gcc保持一致，所以安装时需要注意检查并安装正确版本的相关库，才能正常使用。

## 不同依赖库的版本对应关系一览

- tensorflow与cuda版本对应关系

        https://tensorflow.google.cn/install/source_windows?hl=en#gpu

- pytorch与cuda版本对应关系

        https://pytorch.org/get-started/previous-versions/

<!-- more -->

- cuda与gcc版本对应关系

    - 查最新版本cuda对应gcc

                https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html

    - 查各版本cuda对应gcc

                https://docs.nvidia.com/cuda/archive/9.0/cuda-installation-guide-linux/index.html

    - cuda与gcc版本对应表

        ![loading](/images/CUDA_GCC.png)

## conda和pip安装深度学习框架

- conda安装

   - 优点：conda安装过程会同时安装相应版本的cudatoolkit和cudnn，非常便捷就能使用
   - 缺点：由于cudatoolkit功能不全，一旦需要用到nvcc编译cuda相关文件就不行了

- pip安装

   - 优点：直接使用系统cuda，能使用完整的cuda功能，更健壮



## 个人配置cuda和gcc环境变量 

**PS:前提是相应版本已经安装到服务器上**

### cuda
编辑~/.bashrc文件，然后source一下即可

    # path of CUDA
    export CUDA_HOME=/mnt/cephfs/smil/cuda/cuda-10.0

    export PATH=/mnt/cephfs/smil/cuda/cuda-10.0/bin:$PATH
    export LD_LIBRARY_PATH=/mnt/cephfs/smil/cuda/cuda-10.0/lib64:$LD_LIBRARY_PATH

### gcc

1. 个人设置一个gcc默认路径，如可以在`[home]/usr/bin`
2. 创建一个新的gcc链接文件，让其链接到相应的gcc版本可执行文件

        ln -s /usr/bin/gcc-7 [home]/usr/bin/gcc
3. 修改环境变量，编辑~/.bashrc文件，然后source一下即可

        export PATH=[home]/usr/bin:$PATH